<div class="flex h-screen bg-gray-100">

    <app-sider-bar class="flex h-full"></app-sider-bar> 
    <main class="flex-1 p-4 md:p-8 overflow-y-auto">

        <div *ngIf="user$ | async as user"> 

            <div class="flex flex-col sm:flex-row justify-between items-start mb-10">
                <div class="mb-4 sm:mb-0">
                    <p class="text-3xl md:text-4xl font-extrabold text-gray-800">
                        {{ user.username || 'Nije uneto' }}
                    </p>
                    <p class="text-xl md:text-2xl font-semibold text-gray-600 mt-1">
                        {{ user.ime || 'Ime' }} {{ user.prezime || 'Prezime' }}
                    </p>
                </div>
                <button (click)="openAddAuctionModal()"
                    class="w-full sm:w-auto px-6 py-3 bg-green-500 text-white font-bold rounded-lg shadow-md hover:bg-green-600 transition duration-150 whitespace-nowrap self-start">
                    Dodaj aukciju
                </button>
            </div>
            
            <section class="mt-6">
                <h2 class="text-xl font-bold mb-4">Moje aukcije</h2>

                <div *ngIf="userAuctionsLoading$ | async" class="text-center py-10 text-indigo-600 font-semibold">
                    Učitavanje aukcija...
                </div>
                
                <ng-container *ngIf="!(userAuctionsLoading$ | async) && (userAuctions$ | async) as auctions">
                    
                    <div *ngIf="auctions.length === 0" class="text-center py-10 text-gray-500">
                        Nemate trenutno aktivnih aukcija.
                    </div>
                    
                    <div *ngIf="auctions.length > 0" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <app-auction-card 
                            *ngFor="let auction of auctions" 
                            [auction]="auction"
                            
                            [currentUser]="user" 
                            
                            (edit)="openUpdateItemModal(auction)" 
                            (delete)="handleDeleteAuction($event)">
                        </app-auction-card>
                    </div>
                </ng-container>
            </section>
        
        </div> <div *ngIf="!(user$ | async)" class="text-center p-6 bg-red-50 rounded-lg text-red-600 font-medium max-w-xl">
            <p>Nema dostupnih korisničkih podataka.</p>
        </div>

    </main>
</div>